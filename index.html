<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>PDF Tools — PDF Tools</title>

<!-- Libraries -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>

<style>
  :root{
    --bg: linear-gradient(135deg,#f9f6ff,#e6f7ff);
    --card:#ffffff;
    --accent:#6c5ce7;
    --accent-2:#00b894;
    --muted:#6b7280;
    --radius:14px;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial; background:var(--bg); color:#111;-webkit-tap-highlight-color:transparent;}
  .app{max-width:980px;margin:14px auto;padding:12px;background:linear-gradient(180deg,rgba(255,255,255,0.85),rgba(250,250,255,0.95));border-radius:14px;box-shadow:0 8px 30px rgba(15,15,40,0.06);overflow:visible}
  header{display:flex;align-items:center;justify-content:space-between;padding:8px 6px;position:relative;z-index:40}
  .brand{display:flex;align-items:center;gap:12px}
  .logo{width:56px;height:56px;background:linear-gradient(135deg,var(--accent),#ff7ab6);display:flex;align-items:center;justify-content:center;border-radius:10px;flex-shrink:0}
  .logo svg{width:46px;height:46px}
  h1{font-size:18px;margin:0}
  p.sub{margin:0;font-size:12px;color:var(--muted)}
  .menuWrap{display:flex;align-items:center;gap:8px}
  .menuBtn{background:transparent;border:0;padding:6px;margin-right:6px;border-radius:8px;cursor:pointer;font-size:22px}
  .ad-banner{display:flex;justify-content:center;align-items:center;padding:8px 0}
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px;padding:12px}
  .card{background:var(--card);border-radius:10px;padding:12px;box-shadow:0 6px 16px rgba(12,18,40,0.04);display:flex;flex-direction:column;gap:10px}
  label{font-weight:700;font-size:14px}
  .muted{color:var(--muted);font-size:13px}
  .row{display:flex;gap:8px;flex-wrap:wrap}
  .btn{background:linear-gradient(90deg,var(--accent),#ff7ab6);border:0;color:white;padding:10px 12px;border-radius:10px;cursor:pointer;font-weight:700}
  .btn.secondary{background:linear-gradient(90deg,#00cec9,#00b894)}
  .hint{font-size:12px;color:var(--muted)}
  input[type=file]{display:none}
  .chooseBtn{display:inline-block;padding:8px 10px;border-radius:8px;border:1px dashed #e6e9ef;background:transparent;cursor:pointer;color:#333}
  .fileName{font-size:13px;color:var(--muted)}
  textarea{width:100%;border-radius:8px;border:1px solid #eee;padding:8px;font-size:13px}
  input[type=number]{width:100%;padding:8px;border-radius:8px;border:1px solid #eee}
  footer{padding:10px 12px;display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap}
  .small{font-size:13px;color:var(--muted)}

  /* small left-top about panel (non-modal) */
  .about-panel{
    position:fixed;
    left:12px;
    top:72px;
    min-width:260px;
    max-width:360px;
    background:white;
    border-radius:10px;
    padding:12px;
    box-shadow:0 18px 40px rgba(12,20,40,0.16);
    display:none;
    z-index:10002;
    font-size:14px;
  }
  .about-panel h4{margin:0 0 6px 0}
  .about-close{position:absolute;right:8px;top:8px;background:#f0f2f7;border:0;padding:6px;border-radius:8px;cursor:pointer}

  .toast{position:fixed;left:50%;bottom:90px;transform:translateX(-50%);background:#0f1724;color:white;padding:8px 12px;border-radius:10px;display:none;z-index:10001}
  .thankbar{position:fixed;left:50%;transform:translateX(-50%);top:76px;background:linear-gradient(90deg,#6c5ce7,#ff7ab6);color:white;padding:8px 14px;border-radius:10px;display:none;z-index:10003;box-shadow:0 10px 30px rgba(16,24,40,0.18)}

  /* Limit the single ad container size so it won't overflow */
  #single-ad-container{width:300px;height:255px;overflow:hidden;border-radius:8px}
  @media (max-width:420px){
    .about-panel{left:8px;top:62px;right:8px;min-width:unset;max-width:calc(100% - 16px)}
    #single-ad-container{width:100%;max-width:320px}
  }
</style>
</head>
<body>

<div class="app">
  <header>
    <div class="brand">
      <div class="logo" title="PDF Tools">
        <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
          <defs><linearGradient id="g1" x1="0" x2="1"><stop offset="0" stop-color="#6c5ce7"/><stop offset="1" stop-color="#ff7ab6"/></linearGradient></defs>
          <rect rx="18" width="200" height="200" fill="url(#g1)"/>
          <text x="50%" y="54%" dominant-baseline="middle" text-anchor="middle" font-family="Verdana" font-weight="700" font-size="62" fill="white">PDF</text>
        </svg>
      </div>
      <div>
        <h1>PDF Tools</h1>
        <p class="sub">Made with ❤️ for day to day uses</p>
      </div>
    </div>

    <div class="menuWrap">
      <button class="menuBtn" id="menuToggle" aria-label="menu">⋮</button>
    </div>
  </header>

  <!-- TOP AD: a single ad container placed directly under header -->
  <div class="ad-banner" style="display:flex;justify-content:center;">
    <div id="single-ad-container" aria-hidden="false">
      <!-- Provider script will inject into the container below -->
      <div id="container-4fec6f54d2b4c890f81b65a583f61085"></div>
    </div>
  </div>

  <main>
    <section class="grid">
      <!-- Image to PDF -->
      <div class="card">
        <label>Image → PDF</label>
        <div class="muted">Select one or more images (jpg/png). Order preserved.</div>

        <input type="file" id="imgFiles" accept="image/*" multiple />
        <div style="display:flex;gap:8px;align-items:center">
          <button class="chooseBtn" id="chooseImgBtn">Choose Image(s)</button>
          <div class="fileName" id="imgFilesName">No files chosen</div>
        </div>

        <div class="row">
          <button class="btn" id="img2pdf">Convert Images to PDF</button>
          <button class="btn secondary" id="imgPreview">Preview First</button>
        </div>
        <div class="hint">Tip: Use portrait images. Saved as <code>pdftools_images_to_pdf.pdf</code></div>
      </div>

      <!-- TXT to PDF -->
      <div class="card">
        <label>.txt → PDF</label>
        <div class="muted">Choose a .txt file or paste text below.</div>

        <input type="file" id="txtFile" accept=".txt" />
        <div style="display:flex;gap:8px;align-items:center">
          <button class="chooseBtn" id="chooseTxtBtn">Choose .txt file</button>
          <div class="fileName" id="txtFileName">No file chosen</div>
        </div>

        <textarea id="txtArea" rows="6" placeholder="Or paste text here..."></textarea>
        <div class="row">
          <button class="btn" id="txt2pdf">Convert Text to PDF</button>
          <button class="btn secondary" id="clearText">Clear</button>
        </div>
        <div class="hint">Tip: For long text, conversion will wrap lines automatically.</div>
      </div>

      <!-- PDF Splitter -->
      <div class="card">
        <label>PDF Split / Extract Pages</label>
        <div class="muted">Choose a PDF and extract a range of pages into a new PDF.</div>

        <input type="file" id="pdfSplitFile" accept="application/pdf" />
        <div style="display:flex;gap:8px;align-items:center">
          <button class="chooseBtn" id="chooseSplitBtn">Choose PDF</button>
          <div class="fileName" id="pdfSplitName">No file chosen</div>
        </div>

        <div style="display:flex;gap:8px;">
          <input type="number" id="splitStart" placeholder="Start page (1)" min="1"/>
          <input type="number" id="splitEnd" placeholder="End page (1)" min="1"/>
        </div>
        <div class="row">
          <button class="btn" id="splitPdfBtn">Extract Range → PDF</button>
          <button class="btn secondary" id="countPagesBtn">Load & Count Pages</button>
        </div>
        <div class="hint" id="splitHint">Loa a PDF to see page count.</div>
      </div>

      <!-- PDF Merge -->
      <div class="card">
        <label>PDF Merge (Combine)</label>
        <div class="muted">Select multiple PDFs; they will be merged in the chosen order.</div>

        <input type="file" id="pdfMergeFiles" accept="application/pdf" multiple />
        <div style="display:flex;gap:8px;align-items:center">
          <button class="chooseBtn" id="chooseMergeBtn">Choose PDF(s)</button>
          <div class="fileName" id="pdfMergeName">No files chosen</div>
        </div>

        <div class="row">
          <button class="btn" id="mergeBtn">Merge PDFs</button>
        </div>
        <div class="hint">Merged file will be saved as <code>pdftools_merged.pdf</code></div>
      </div>

    </section>
  </main>

  <footer>
    <div style="display:flex;gap:12px;align-items:center">
      <div class="small">Made with ❤️ — PDF Tools</div>
      <div class="small muted">by Saikiran</div>
    </div>

    <div class="ad-slot" id="bottom-ad-slot" style="width:320px;height:50px;">
      <!-- keep footer placeholder empty or put a small branded placeholder -->
    </div>
  </footer>
</div>

<!-- ABOUT panel (left-top) -->
<div class="about-panel" id="aboutPanel" role="dialog" aria-label="About PDF Tools">
  <button class="about-close" id="closeAbout">✕</button>
  <h4>About PDF Tools</h4>
  <p><strong>Developer:</strong> Saikiran Jinde</p>
  <p><strong>Email:</strong> <a href="mailto:saikiranjinde49@gmail.com">saikiranjinde49@gmail.com</a></p>
  <h5 style="margin-bottom:6px">About this project</h5>
  <p style="margin-top:6px">
    <strong>PDF Tools</strong> is a lightweight, mobile-first web utility created to simplify everyday PDF tasks.
    Built by a diploma student, it runs entirely in your browser — conversions happen on your device so your files stay private.
    Features include Image → PDF, .txt → PDF, Merge PDFs, and Extract pages. The app is lean and optimized for phones: fast conversions,
    small UI footprint, and easy tap targets. Future plans: cloud backup option, more export formats, and accessibility improvements.
  </p>
  <h5 style="margin-top:8px">Instagram</h5>
  <p><a href="https://instagram.com/saikiran.jinde_2706" target="_blank">@saikiran.jinde_2706</a></p>
  <p style="font-size:13px;color:var(--muted)">Made by a Diploma student. For feedback/collab, email me — I’ll respond.</p>
</div>

<!-- toast and thank bar -->
<div id="toast" class="toast"></div>
<div id="thankBar" class="thankbar">Thank you for using PDF Tools</div>

<!-- ===== AD SCRIPT (only the requested provider) ===== -->
<!-- EffectiveGateCPM script + single container (placed above) -->
<script async="async" data-cfasync="false" src="//pl28156245.effectivegatecpm.com/4fec6f54d2b4c890f81b65a583f61085/invoke.js"></script>
<script type="text/javascript">
	atOptions = {
		'key' : 'c533f92842a99236b1cb6736b289861e',
		'format' : 'iframe',
		'height' : 50,
		'width' : 320,
		'params' : {}
	};
</script>
<script type="text/javascript" src="//www.highperformanceformat.com/c533f92842a99236b1cb6736b289861e/invoke.js"></script>
<!-- The script should inject into div#container-4fec6f54d2b4c890f81b65a583f61085 inside #single-ad-container -->

<!-- ===== APP LOGIC ===== -->
<script>
(async function(){
  const { jsPDF } = window.jspdf;
  const { PDFDocument } = PDFLib;

  function toast(msg, time=2200){
    const t = document.getElementById('toast');
    t.textContent = msg;
    t.style.display='block';
    setTimeout(()=> t.style.display='none', time);
  }
  function showThankBar(time=2500){
    const b = document.getElementById('thankBar');
    b.style.display='block';
    setTimeout(()=> b.style.display='none', time);
  }

  // menu toggle + about panel
  const menuToggle = document.getElementById('menuToggle');
  const aboutPanel = document.getElementById('aboutPanel');
  const closeAbout = document.getElementById('closeAbout');

  menuToggle.addEventListener('click', e=>{
    // toggle about panel (left-top)
    aboutPanel.style.display = aboutPanel.style.display === 'block' ? 'none' : 'block';
  });
  closeAbout.addEventListener('click', ()=> aboutPanel.style.display='none');

  // Close about if user clicks outside the panel (but keep small margin)
  document.addEventListener('click', (ev)=>{
    const panel = document.getElementById('aboutPanel');
    const btn = document.getElementById('menuToggle');
    if(!panel.contains(ev.target) && ev.target !== btn){
      panel.style.display = 'none';
    }
  });

  // ---------- Helper: visible choose buttons that trigger hidden input ----------
  function bindChooser(chooseBtnId, inputId, displayNameId){
    const btn = document.getElementById(chooseBtnId);
    const inp = document.getElementById(inputId);
    const name = document.getElementById(displayNameId);
    btn.addEventListener('click', ()=> inp.click());
    inp.addEventListener('change', ()=> {
      if(!inp.files || inp.files.length===0) name.textContent = 'No files chosen';
      else if(inp.files.length === 1) name.textContent = inp.files[0].name;
      else name.textContent = inp.files.length + ' files selected';
    });
  }
  bindChooser('chooseImgBtn','imgFiles','imgFilesName');
  bindChooser('chooseTxtBtn','txtFile','txtFileName');
  bindChooser('chooseSplitBtn','pdfSplitFile','pdfSplitName');
  bindChooser('chooseMergeBtn','pdfMergeFiles','pdfMergeName');

  // ---------- Download helper ----------
  function triggerDownloadFromBlob(blob, filename){
    try{
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      a.remove();
      setTimeout(()=> URL.revokeObjectURL(url), 3000);
    }catch(e){
      console.error('Download failed', e);
      toast('Automatic download blocked. Opening file; long-press to save.');
      try{ const url = URL.createObjectURL(blob); window.open(url,'_blank'); }catch(_){}
    }
  }

  // ---------- Image -> PDF ----------
  document.getElementById('img2pdf').addEventListener('click', async ()=>{
    const files = document.getElementById('imgFiles').files;
    if(!files || files.length===0){ toast("Select image(s) first"); return; }
    try{
      const pdf = new jsPDF({unit:'pt', format:'a4'});
      for(let i=0;i<files.length;i++){
        const f = files[i];
        const dataUrl = await fileToDataUrl(f);
        const img = await loadImage(dataUrl);
        const pageWidth = pdf.internal.pageSize.getWidth();
        const pageHeight = pdf.internal.pageSize.getHeight();
        let w = img.width, h = img.height;
        const ratio = Math.min(pageWidth/w, pageHeight/h);
        w = w * ratio; h = h * ratio;
        const x = (pageWidth - w)/2; const y = (pageHeight - h)/2;
        if(i>0) pdf.addPage();
        pdf.addImage(dataUrl, 'JPEG', x, y, w, h);
      }
      const blob = pdf.output('blob');
      const outName = `pdftools_images_to_pdf.pdf`;
      triggerDownloadFromBlob(blob, outName);
      toast('Saved ' + outName);
      showThankBar();
    }catch(err){
      console.error(err);
      toast('Image → PDF failed');
    }
  });

  // other features (txt->pdf, split, merge) kept same as before...
  // (omitted here for brevity — keep the same functions from your previous file)

  // helpers
  function fileToDataUrl(file){
    return new Promise((res,rej)=>{
      const r = new FileReader();
      r.onload = ()=> res(r.result);
      r.onerror = ()=> rej(r.error);
      r.readAsDataURL(file);
    });
  }
  function loadImage(dataURL){
    return new Promise((res,rej)=>{
      const img = new Image();
      img.onload = ()=> res(img);
      img.onerror = ()=> rej('img error');
      img.src = dataURL;
    });
  }

  // ensure ad placeholder present (script should inject into the container)
  try{
    
    
  }catch(e){}

})();
</script>

</body>
</html>